/*
 sorttable

 @Version 1.0.3

 Copyright (c) 2013, David Brink dbrink@gmail.com
 Copyright (c) 2010, Andres Koetter
 Dual licensed under the MIT (MIT-LICENSE.txt)
 and GPL (GPL-LICENSE.txt) licenses.

 Inspired by the the dragtable from Dan Vanderkam (danvk.org/dragtable/)
 Thanks to the jquery and jqueryui comitters

 Any comment, bug report, feature-request is welcome
 Feel free to contact me.
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(d,a,b){d instanceof String&&(d=String(d));for(var e=d.length,c=0;c<e;c++){var g=d[c];if(a.call(b,g,c,d))return{i:c,v:g}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,a,b){if(d==Array.prototype||d==Object.prototype)return d;d[a]=b.value;return d};$jscomp.getGlobal=function(d){d=["object"==typeof globalThis&&globalThis,d,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<d.length;++a){var b=d[a];if(b&&b.Math==Math)return b}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(d,a){var b=$jscomp.propertyToPolyfillSymbol[a];if(null==b)return d[a];b=d[b];return void 0!==b?b:d[a]};
$jscomp.polyfill=function(d,a,b,e){a&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(d,a,b,e):$jscomp.polyfillUnisolated(d,a,b,e))};$jscomp.polyfillUnisolated=function(d,a,b,e){b=$jscomp.global;d=d.split(".");for(e=0;e<d.length-1;e++){var c=d[e];if(!(c in b))return;b=b[c]}d=d[d.length-1];e=b[d];a=a(e);a!=e&&null!=a&&$jscomp.defineProperty(b,d,{configurable:!0,writable:!0,value:a})};
$jscomp.polyfillIsolated=function(d,a,b,e){var c=d.split(".");d=1===c.length;e=c[0];e=!d&&e in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var g=0;g<c.length-1;g++){var f=c[g];if(!(f in e))return;e=e[f]}c=c[c.length-1];b=$jscomp.IS_SYMBOL_NATIVE&&"es6"===b?e[c]:null;a=a(b);null!=a&&(d?$jscomp.defineProperty($jscomp.polyfills,c,{configurable:!0,writable:!0,value:a}):a!==b&&(void 0===$jscomp.propertyToPolyfillSymbol[c]&&($jscomp.propertyToPolyfillSymbol[c]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(c):
$jscomp.POLYFILL_PREFIX+c),$jscomp.defineProperty(e,$jscomp.propertyToPolyfillSymbol[c],{configurable:!0,writable:!0,value:a})))};$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");
(function(d){d.widget("extend.sorttable",d.ui.sortable,{widgetEventPrefix:"sorttable",options:{helper:"table",helperCells:1},_table:null,_startIndex:0,_endIndex:0,_currentItemWidth:0,_sortCells:null,_createHelper:function(a){if("table"==this.options.helper){if(!this.setWidths){this.setWidths=!0;var b=this.items,e=[];for(i=0;i<b.length;i++){var c=d(b[i].item[0]);e[i]=c.innerWidth()-parseInt(c.css("paddingLeft")||0,10)-parseInt(c.css("paddingRight")||0,10)}for(i=0;i<b.length;i++)c=d(b[i].item[0]),c.width(e[i])}return this._createHelperTable(a,
this.currentItem)}return d.ui.sortable.prototype._createHelper.apply(this,[a])},_createHelperTable:function(a,b){var e=this.options.helperCells,c=b.is("th")||b.is("td")?b:b.parents("th:first,td:first"),g=c.prevAll().length+1;this._currentItemWidth=b=c.innerWidth()-parseInt(c.css("paddingLeft")||0,10)-parseInt(c.css("paddingRight")||0,10);a=this._table;var f;"number"==typeof e&&(f=e);var h=d([]);1!=f&&(h=a.children().find(">tr:not(.ui-sortable)>td:nth-child("+g+")"),0>f?h=h.slice(0,h.length+f):1<f&&
(h=h.slice(0,f-1)));!f&&e&&(h=h.filter(e));h.splice(0,0,c);this._sortCells=h;f=a.clone().empty();f.css("position","absolute");f.css("width","auto");f.css("min-width","inherit");f.css("height","auto");f.css("min-height","inherit");f.attr("id","");for(i=0;i<h.length;i++)c=h[i],c instanceof jQuery||(c=d(c)),e=c.parents("tr:first"),c=c.clone(),c.width(b),g=e.clone().empty(),e=e.innerHeight()-parseInt(e.css("paddingTop")||0,10)-parseInt(e.css("paddingBottom")||0,10),g.height(e),c.appendTo(g.appendTo(f));
f.find().each(function(){this.attr("id","")});a.before(f);return f},_createPlaceholder:function(a){var b=a||this,e=b.options;d.ui.sortable.prototype._createPlaceholder.apply(this,arguments);if("table"==e.helper){e=b.placeholder;b.placeholder.width(b._currentItemWidth);var c=b._sortCells;c&&(c.hide(),1<c.length&&e.attr("rowSpan",c.length));b=b._placeholderRowSpan;1<b&&e.attr("rowSpan",b)}},_swapNodes:function(a,b){if(a&&b){var e=a.parentNode,c=a.nextSibling===b?a:a.nextSibling;b.parentNode.insertBefore(a,
b);e.insertBefore(b,c)}},_bubbleCols:function(){var a=this._startIndex,b=this._endIndex,e=this._table.children().find("> tr:not(.ui-sortable)");if(a<b)for(;a<b;a++)for(var c=e.find(">td:nth-child("+a+"),>th:nth-child("+a+")"),g=e.find(">td:nth-child("+(a+1)+"),>th:nth-child("+(a+1)+")"),f=0;f<c.length;f++)this._swapNodes(c[f],g[f]);else for(;a>b;a--)for(c=e.find(">td:nth-child("+a+"),>th:nth-child("+a+")"),g=e.find(">td:nth-child("+(a-1)+"),>th:nth-child("+(a-1)+")"),f=0;f<c.length;f++)this._swapNodes(c[f],
g[f])},_rearrangeTableBackroundProcessing:function(){var a=this;return function(){a._bubbleCols()}},_sortStart:function(){var a=this;return function(b,e){a._startIndex=e.item.prevAll().length+1}},_sortUpdate:function(){var a=this;return function(b,e){a._endIndex=e.item.prevAll().length+1;a._startIndex!=a._endIndex&&setTimeout(a._rearrangeTableBackroundProcessing(),50)}},_sortStop:function(){var a=this;return function(b,e){a._sortCells&&a._sortCells.show()}},_create:function(){var a=this.element;a.is("table")?
(this._table=a,a=this.element=a.find("tr:first")):this._table=a.parents("table:first");this._endIndex=this._startIndex=0;a.bind("sorttablestart",this._sortStart());a.bind("sorttableupdate",this._sortUpdate());a.bind("sorttablestop",this._sortStop());d.ui.sortable.prototype._create.apply(this)},destroy:function(){d.Widget.prototype.destroy.apply(this,arguments)}})})(jQuery);
